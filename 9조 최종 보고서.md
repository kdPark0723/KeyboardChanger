# 오픈소스기반 설계 기초 보고서



## 1. 프로젝트명

Keyboard Changer(영문타자 변환기)



## 2. 관련 프로젝트

- 영어로 입력된 문장으로 변환

  https://github.com/Neder/InteliAutomata





## 3. 프로젝트 전체 구성도

### 3-1. 프로젝트 구조도

![image](https://user-images.githubusercontent.com/50135193/70895525-72851780-2032-11ea-8d49-685c0b72bb53.png)



### 3-2. HTTP 요청 라우팅

![image](https://user-images.githubusercontent.com/50135193/70903993-9b61d880-2043-11ea-91fb-7a76159538df.png)

### 3-3. 영->한/영->전환



- ##### 영->한 전환

![image](https://user-images.githubusercontent.com/50135193/70904061-cb10e080-2043-11ea-8b74-5cee112c5cbe.png)

---



- ##### 영->일전환

![image](https://user-images.githubusercontent.com/50135193/70904075-da902980-2043-11ea-8463-7d4e745e78e0.png)







## 4. 소스 파일 내 함수들의 주요 기능 요약

## GetChangedKeyboardStringHandler 

문자열을 다른 언어로 변환하는 추상 클래스

```
fun handleRequest(request: ServerRequest): Mono<ServerResponse>
```

- Http 요청/응답과 change 함수 바인딩



```
fun getType(type: String): KeyboardType
```

- string을 KeyboardType으로 변환



```
fun change(string: KeyboardString, requireType: KeyboardType): KeyboardString
```

- 실제 문자열 변환 함수



## GetChangedKeyboardStringToJapaneseHandler

문자열을 일본어로 변환하는 핸들러

```
public KeyboardString change(@NotNull KeyboardString string, @NotNull KeyboardType requireType)
```

- String을 원하는 일본어로 변환하는 함수



## GetChangedKeyboardStringToKoreanHandler

문자열을 한국어로 변환하는 핸들러

```
public KeyboardString change(@NotNull KeyboardString string, @NotNull KeyboardType requireType)
```

- String을 원하는 일본어로 변환하는 함수



## GlobalErrorWebExceptionHandler

JVM 예외를 Http 상태 코드로 처리하는 핸들러

```
fun handle(exchange: ServerWebExchange, ex: Throwable): Mono<Void>
```

- 에러가 발생했을때 호출되는 핸들러



```
fun createResponse(throwable: Throwable): Mono<ServerResponse>
```

```
fun createResponse(httpStatus: HttpStatus, message: String?): Mono<ServerResponse>
```

- 에러가 발생했을때 적절한 ServerResponse을  생성



## HandlerStrategiesResponseContext

ServerResponse 생성을 위한 전략 정의

```
fun messageWriters(): List<HttpMessageWriter<*>>
```

- 메시지 작성을 위한 messageWriters 설정



```
override fun viewResolvers(): List<ViewResolver>
```

- 뷰 영역 구현을 위한 viewResolvers 설정



## RoutesConfig

Spring 의 라우터 환경 설정

```
fun routes(): RouterFunction<ServerResponse>
```

- Spring boot에서 route 의존성 주입을 위한 bean 정의



## Api

http api를 추상화 하는 open 클래스

```
protected fun <T> getResponseBody(responseBodySpec: KotlinBodySpec<T>): T?
```

- responseBodySpec에서 원하는 응답추출



## GetChangedKeyboardStringFromEnglishApi

영어에서 다른 언어로 문자열을 변환하는 api open 클래스

```
fun getChangedKeyboardStringSuccess(value: String, type: String = "en"): KeyboardString?
```

- 문자열 변환을 요청하고 성공했는지 테스트



```
fun getChangedKeyboardStringFailBecauseForbidden(value: String, type: String = "en"): ErrorResponse?
```

- 문자열 변환을 요청하고 Forbidden 으로 실패했는지 테스트



```
private fun getChangedKeyboardString(value: String, type: String): WebTestClient.ResponseSpec
```

- 문자열 변환을 요청



## GetChangedKeyboardStringFromEnglishToJapaneseApi

영어에서 일본어로 문자열을 변환하는 API



## GetChangedKeyboardStringFromEnglishToKoreanApi

영어에서 한국어로 문자열을 변환하는 API



## ServerTest

서버 API 호출을 위한 추상 클래스



## GetChangedKeyboardStringFromEnglishToJapaneseTest

영어에서 일본어로 변환하는 API 테스트

```
fun getChangedKeyboardStringFromEnglishTestSuccess()
```

- 영어에서 일본어로 재대로 변환되는지 테스트



```
fun getChangedKeyboardStringFromEnglishTestFailBecauseTypeIsInvalid()
```

- 영어에서 일본어로 변환할때 타입이 잘못었을때 실패하는지 테스트



## GetChangedKeyboardStringFromEnglishToKoreanTest

영어에서 한국어로 변환하는 API 테스트

```
fun getChangedKeyboardStringFromEnglishTestSuccess()
```

- 영어에서 한국어로 재대로 변환되는지 테스트



```
fun getChangedKeyboardStringFromEnglishTestFailBecauseTypeIsInvalid()
```

- 영어에서 한국어로 변환할때 타입이 잘못었을때 실패하는지 테스트



## KeyboardChangerApplicationTests

어플리케이션이 성공적으로 생성되었는지 테스트

```
fun contextLoads()
```

- 어플리케이션이 성공적으로 생성되었는지 테스트



------------------요약 계속 추가-------------------------

## 5. 전체 메뉴얼 

### 설치

---



#### 다운로드

```sh
git clone https://github.com/kdPark0723/KeyboardChanger당
```



#### 빌드

```sh
sudo bash ./gradlew --scan build
```



#### 실행

```sh
java -jar build/libs/KeyboardChanger-0.0.1-SNAPSHOT.jar
```



#### 스크립트 실행

```sh
git clone https://github.com/kdPark0723/KeyboardChanger
cd KeyboardChanger

sudo bash ./gradlew --scan build
java -jar build/libs/KeyboardChanger-0.0.1-SNAPSHOT.jar
```



## 사용법

#### 1. ENG -> KOR

1. Run Script 까지 진행 후 웹 브라우저를 연다.

2. 검색 창에 "localhost:3000/korean/[변환하고 싶은 글자]?type=en" 를 입력한다.

   (ex: dkssudgktpdy 입력)

   ![image](https://user-images.githubusercontent.com/50135193/70551021-1184bc00-1bba-11ea-89db-0aeed003a190.png)

3. 결과 값이 브라우저 화면에 출력된다.



#### 2. ENG -> JPN

1. Run Script 까지 진행 후 웹 브라우저를 연다.

2. 검색 창에 "localhost:3000/japanese/[변환하고 싶은 글자]?type=en" 를 입력한다.

   (ex: arigato 입력)

   ![image](https://user-images.githubusercontent.com/50135193/70612017-7affdb80-1c49-11ea-9469-b019eead1c3f.png)

3. 결과 값이 브라우저 화면에 출력된다.

   * 띄어쓰기 입력시 띄어쓰기를 기준으로 가타카나로 나타내준다

     ![image](https://user-images.githubusercontent.com/50135193/70622122-8f9a9e80-1c5e-11ea-8e93-bf45f6588c24.png)



## 6.기대효과 및 향후 발전 방향

#### 기대효과

- 해외에 있어 입력체계가 세팅 되어 있지 않을때 유용하게 사용가능
- 기기 고장 및 소프트웨어 오류로 해당언어를 입력하지 못할 시 유용하게 사용 가능
- 다양한 프로그램에서 간편하게 여러 언어 입력 지원 가능



#### 향후 발전 방향

- 추후 여러나라의 개발자들의 기여를 통해 더 많은 언어 지원
- 사용자 편의를 위한 기능 추가





## 7.팀원 참여 업무 및 참여율 기술

- 박시율(25%)
  - 참여 업무:PM, 프로젝트 구조 설계, Spring boot 세팅, Sprint boot init 테스트 작성, 영한 변환 테스트 작성, 영일 변환 테스트 작성, 영한 변환 라우터 작성, 영일 변환 라우터 작성, JVM 예외 Http Status code에 바인딩, 코드 리뷰, 문서 작업 도움 
- 변지현(25%)
  - 참여업무:





- 윤석민(25%)
  - 참여업무:





- 하윤철(25%)
  - 참여업무: 발표 PPT작성, README.MD 작성, 기타문서화 작업
